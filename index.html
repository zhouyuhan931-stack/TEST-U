<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>TEST U｜診断フォーム</title>
  <style>
   :root{
  /* paper base + low contrast ink */
  --paper:#F7F5EF;
  --paper-2:#F3F0EA;

  --ink:#6E6880;      /* 主字：灰紫 */
  --muted:#9A94AA;    /* 次字：更淡 */
  --line:rgba(110,104,128,.35);  /* 线条：很淡的灰紫 */

  /* 取消“卡片感”，变成轻薄叠层 */
  --card:rgba(247,245,239,.55);
  --shadow: 0 0 0 rgba(0,0,0,0);

  /* 默认强调色（结果页会被 JS 覆盖） */
  --accent:#8C86A6;
  --accent-soft: rgba(140,134,166,.10);
}

    *{box-sizing:border-box}
    body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", "PingFang SC", "Microsoft Yahei", Arial, sans-serif;
  color:var(--ink);

  /* 关键：用你导出的 bg-02.png 做主背景，再叠一层纸张雾面 */
  background:
    radial-gradient(1200px 700px at 20% -10%, rgba(255,255,255,.55), transparent 60%),
    radial-gradient(1000px 700px at 80% 0%, rgba(255,255,255,.38), transparent 55%),
    url("bg-02.png") center top / cover no-repeat,
    linear-gradient(180deg, var(--paper), var(--paper-2));

  min-height:100vh;
}

    .wrap{
      max-width: 980px;
      margin: 0 auto;
      padding: 20px 16px 56px;
    }

    /* subtle “packaging-like” line ornaments */
    .ornaments{
  position:fixed;
  inset:0;
  pointer-events:none;

  /* 更轻、更“星尘纸张” */
  opacity:.28;
  background:
    radial-gradient(circle at 12% 18%, rgba(140,134,166,.20) 0 1px, transparent 2px),
    radial-gradient(circle at 68% 14%, rgba(140,134,166,.18) 0 1px, transparent 2px),
    radial-gradient(circle at 82% 72%, rgba(140,134,166,.16) 0 1px, transparent 2px),
    radial-gradient(circle at 24% 78%, rgba(140,134,166,.18) 0 1px, transparent 2px),
    radial-gradient(circle at 40% 55%, rgba(140,134,166,.10) 0 2px, transparent 6px),
    radial-gradient(circle at 60% 45%, rgba(140,134,166,.10) 0 2px, transparent 6px);
  background-size: 420px 420px, 520px 520px, 480px 480px, 560px 560px, 900px 900px, 980px 980px;
  mix-blend-mode: multiply;
}


    .topbar{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      margin: 10px 0 18px;
    }
    .brand{
      display:flex; flex-direction:column; gap:6px;
    }
    .logo{
      font-weight:700;
      letter-spacing:.08em;
      font-size: 22px;
      line-height:1.1;
    }
    .logo span{
      color:var(--accent);
      text-shadow: 0 0 0 transparent;
    }
    .sub{
      font-size: 13px;
      color: var(--muted);
    }
   .pill{
  border:1px solid var(--line);
  background: rgba(247,245,239,.55);
  border-radius: 999px;
  padding: 8px 12px;
  font-size: 12px;
  color: var(--muted);
  box-shadow: none;
  white-space:nowrap;
}


  .card{
  background: transparent;    /* 关键：卡片变透明 */
  border: 0;
  border-radius: 0;
  box-shadow: none;
  overflow: visible;
}

    @media (min-width: 760px){
      .card-inner{ padding: 24px 26px; }
      .logo{ font-size: 26px; }
    }

    .section-title{
      font-weight:700;
      letter-spacing:.05em;
      margin:0 0 10px;
      font-size: 14px;
      color: var(--muted);
    }

    .btnrow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top: 14px;
    }
    button{
      appearance:none;
      border:0;
      border-radius: 14px;
      padding: 12px 14px;
      font-size: 14px;
      cursor:pointer;
      transition: transform .05s ease, filter .15s ease, background .15s ease;
    }
    button:active{ transform: translateY(1px); }

   button{
  appearance:none;
  border:1px solid var(--line);
  border-radius: 999px; /* 更像你图3按钮 */
  padding: 12px 18px;
  font-size: 14px;
  cursor:pointer;
  background: rgba(247,245,239,.65);
  color: var(--ink);
  transition: transform .05s ease, background .15s ease, border-color .15s ease, color .15s ease;
}
button:active{ transform: translateY(1px); }

.btn-primary{
  background: rgba(247,245,239,.70);
  border:1px solid rgba(110,104,128,.55);
  color: var(--ink);
}
.btn-primary:hover{
  background: rgba(247,245,239,.85);
  border-color: rgba(110,104,128,.70);
}

.btn-ghost{
  background: rgba(247,245,239,.40);
  border:1px solid var(--line);
  color: var(--muted);
}
.btn-ghost:hover{
  background: rgba(247,245,239,.70);
  color: var(--ink);
}

.btn-soft{
  background: rgba(140,134,166,.08);
  border:1px solid rgba(140,134,166,.28);
  color: var(--ink);
}

    .btn-primary:hover{ filter: brightness(.97); }
    .btn-ghost{
      background: transparent;
      border:1px solid var(--line);
      color: var(--ink);
    }
    .btn-ghost:hover{ background: rgba(255,255,255,.55); }
    .btn-soft{
      background: var(--accent-soft);
      color: var(--accent);
      border: 1px solid rgba(0,0,0,0);
    }

    .screen{ display:none; }
    .screen.active{ display:block; }

    /* Q&A only */
    .qhead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom: 14px;
    }
    .qno{
      font-size: 12px;
      color: var(--muted);
    }
    .progress{
      height: 8px;
      border-radius: 999px;
      background: rgba(255,255,255,.55);
      border:1px solid var(--line);
      overflow:hidden;
      flex:1;
      max-width: 360px;
    }
    .bar{
      height:100%;
      width:0%;
      background: var(--accent);
      border-radius: 999px;
      transition: width .25s ease;
    }
    .qtext{
      font-size: 18px;
      line-height:1.5;
      margin: 6px 0 12px;
    }
    .choices{
      display:flex;
      flex-direction:column;
      gap:10px;
      margin-top: 10px;
    }
    .choice{
  text-align:left;
  border: 1px solid var(--line);
  background: rgba(247,245,239,.55);
  color: var(--ink);
  border-radius: 16px;
  padding: 14px 14px;
  line-height:1.35;
}
.choice:hover{
  background: rgba(247,245,239,.78);
}


    .hint{
      color: var(--muted);
      font-size: 12px;
      margin-top: 8px;
    }

    /* Result (no right column) */
    .result-hero{
      padding: 16px 16px 14px;
      border-bottom: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.75), rgba(255,255,255,.35));
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: var(--accent-soft);
      color: var(--accent);
      font-size: 12px;
      font-weight: 600;
      letter-spacing:.04em;
    }
    .result-name{
      margin: 10px 0 6px;
      font-size: 28px;
      letter-spacing:.02em;
      line-height:1.15;
    }
    .result-name .en{
      font-weight: 600;
      opacity:.92;
    }
    .result-tagline{
      margin: 0;
      color: var(--muted);
      line-height:1.6;
      font-size: 14px;
      max-width: 60ch;
    }

    .result-body{ padding: 16px; }
    .kv{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      margin: 10px 0 6px;
    }
    .chip{
      border:1px solid var(--line);
      background: rgba(255,255,255,.65);
      border-radius: 999px;
      padding: 6px 10px;
      font-size: 12px;
      color: var(--ink);
    }

    .details{
      margin-top: 12px;
      border-top: 1px solid var(--line);
      padding-top: 14px;
      display:none;
    }
    .details.active{ display:block; }
    .block{
      padding: 12px 12px;
      background: rgba(255,255,255,.55);
      border:1px solid var(--line);
      border-radius: 14px;
      margin-bottom: 10px;
    }
    .block h4{
      margin: 0 0 6px;
      font-size: 13px;
      color: var(--muted);
      letter-spacing:.05em;
    }
    .block p{
      margin: 0;
      line-height:1.7;
      font-size: 14px;
    }

    .footer-note{
      margin-top: 10px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.6;
    }
  </style>
</head>

<body>
  <div class="ornaments"></div>

  <div class="wrap">
    <div class="topbar">
      <div class="brand">
        <div class="logo">TEST <span>U</span></div>
        <div class="sub">味覚とビジュアルで楽しむ、占いみたいなクラフトビール診断</div>
      </div>
      <div class="pill" id="mode-pill">診断フォーム（6惑星）</div>
    </div>

    <div class="card">
      <!-- START -->
      <section class="screen active" id="screen-start">
        <div class="card-inner">
          <p class="section-title">はじめに</p>
          <div style="font-size:16px; line-height:1.8;">
            「正解」はありません。<br/>
            直感で選ぶほど、あなたっぽい結果になります。<br/>
            <span style="color:var(--muted); font-size:13px;">※テスト中はQ&Aだけ表示されます。</span>
          </div>
          <div class="btnrow">
            <button class="btn-primary" id="btn-start">診断を始める</button>
            <button class="btn-ghost" id="btn-about">TEST Uとは？</button>
          </div>
          <div class="hint" id="about-text" style="display:none; margin-top:10px;">
            TEST U は、惑星のイメージ×気分・性格×ビールの風味を重ねて、<br/>
            ひとつの“今のあなた”を映し出す、軽量なセルフ占い体験です。
          </div>
        </div>
      </section>

      <!-- QUIZ (Q&A ONLY) -->
      <section class="screen" id="screen-quiz">
        <div class="card-inner">
          <div class="qhead">
            <div class="qno" id="qno">Q1 / 8</div>
            <div class="progress" aria-label="progress">
              <div class="bar" id="bar"></div>
            </div>
          </div>

          <div class="qtext" id="qtext">質問</div>
          <div class="choices" id="choices"></div>

          <div class="btnrow" style="justify-content:space-between;">
            <button class="btn-ghost" id="btn-back">戻る</button>
            <button class="btn-soft" id="btn-restart-mini">最初から</button>
          </div>
          <div class="hint">※迷ったら「いま一番近い」を選んでOK。</div>
        </div>
      </section>

      <!-- RESULT (NO RIGHT COLUMN) -->
      <section class="screen" id="screen-result">
        <div class="result-hero">
          <span class="badge" id="result-badge">RESULT</span>
          <div class="result-name" id="result-name">水星 <span class="en">Mercury</span></div>
          <p class="result-tagline" id="result-tagline">ひらめきは一瞬。考えるより先に、心が動く。</p>
        </div>

        <div class="result-body">
          <div class="kv" id="result-kv"></div>

          <div class="btnrow">
            <!-- this is the button you asked: “結果をコピー” -> “続き” -->
            <button class="btn-primary" id="btn-continue">続き</button>
            <button class="btn-ghost" id="btn-restart">もう一度診断する</button>
          </div>

          <div class="details" id="details">
            <div class="block">
              <h4>人格タイプ</h4>
              <p id="result-persona"></p>
            </div>
            <div class="block">
              <h4>フレーバーの印象</h4>
              <p id="result-flavor"></p>
            </div>
            <div class="block">
              <h4>今日のひとこと</h4>
              <p id="result-line"></p>
            </div>
            <div class="footer-note">
              ※この診断は占い的な演出です。気分に合う言葉だけ持ち帰ってね。
            </div>
          </div>
        </div>
      </section>
    </div>
  </div>

<script>
(function(){
  // ====== PLANETS (6 only) ======
  const PLANETS = {
    mercury: {
      kanji: "水星", en: "Mercury",
      accent: "#2b4a6a",
      keywords: ["情報", "スピード", "機転"],
      tagline: "ひらめきは一瞬。考えるより先に、心が動く。",
      persona: "頭の回転が速く、空気を読むのも得意。思いついたらすぐ動ける、軽やかな知性派。",
      flavor: "Crisp / Clean / Citrus（すっきり・シャープ・柑橘）",
      line: "動く前に、もう答えは出てる。"
    },
    venus: {
      kanji: "金星", en: "Venus",
      accent: "#b27777",
      keywords: ["美意識", "やさしさ", "恋の星"],
      tagline: "触れたものを、すこしだけ幸せにしてしまう。甘く、やわらかい引力。",
      persona: "美や心地よさを大事にし、周りをふわっと明るくする調和の人。やさしさが魅力。",
      flavor: "Floral / Creamy / Peach（花・ミルキー・桃）",
      line: "やさしさは、いちばん強い魔法。"
    },
    earth: {
      kanji: "地球", en: "Earth",
      accent: "#3f7a63",
      keywords: ["安定", "調和", "信頼"],
      tagline: "そこにいるだけで、すべてが、ちょうどよくなる。静かで、確かな重力。",
      persona: "現実と理想、そのちょうど真ん中を歩ける人。周りをよく見て自然と支える“調整役”。",
      flavor: "Malt / Tea / Nuts（穏やか・香ばしい・落ち着き）",
      line: "安心は、あなたがつくっている。"
    },
    mars: {
      kanji: "火星", en: "Mars",
      accent: "#b24b3f",
      keywords: ["情熱", "挑戦", "行動力"],
      tagline: "迷うより先に、一歩踏み出す。熱は、あなたのエンジン。",
      persona: "負けず嫌いと挑戦心のかたまり。やりたいと思ったらすぐ動く、情熱的なリーダー気質。",
      flavor: "Spicy / Bitter / Citrus（刺激・キレ・勢い）",
      line: "その火は、今日の味方。"
    },
    jupiter: {
      kanji: "木星", en: "Jupiter",
      accent: "#7b5a3a",
      keywords: ["拡大", "発展", "幸運"],
      tagline: "可能性は、まだ広がる。大きく笑って、前へ。",
      persona: "視野が広く、物事を大きく考えられる。楽観的で知的好奇心が強い“探求者”。",
      flavor: "Warm / Rich / Amber（深み・コク・琥珀）",
      line: "遠くを見るほど、運は近づく。"
    },
    uranus: {
      kanji: "天王星", en: "Uranus",
      accent: "#2d8c8a",
      keywords: ["個性", "革新", "自由"],
      tagline: "変化は、いつもあなたから始まる。型を超えて、風向きを変える。",
      persona: "型にはまらない発想で空気を変える存在。普通に縛られない、ユニークな感性派。",
      flavor: "Fresh / Mint / Spark（爽快・ミント・刺激）",
      line: "いつもと違う、を選ぶ日。"
    }
  };

  // ====== QUESTIONS (Q&A only, choices map to planets) ======
  // NOTE: keep it lightweight; you can later replace texts with your final JP copy.
  const QUESTIONS = [
    {
      q: "いまのあなたにいちばん近いのは？",
      a: [
        { t:"すぐ動く。考えながら走る。", sub:"直感とスピード", p:"mercury" },
        { t:"場の空気を整えたい。", sub:"安定と調和", p:"earth" },
        { t:"とにかく挑戦したい。", sub:"情熱と行動", p:"mars" },
        { t:"美しいものに触れたい。", sub:"やさしさと美意識", p:"venus" }
      ]
    },
    {
      q: "人といるとき、自然に出る役割は？",
      a: [
        { t:"話を回す・情報をつなぐ", sub:"コミュ力・機転", p:"mercury" },
        { t:"みんなが安心するよう支える", sub:"信頼・調整", p:"earth" },
        { t:"引っ張る・決める", sub:"リーダー・勢い", p:"mars" },
        { t:"雰囲気をやわらげる", sub:"やさしさ・気遣い", p:"venus" }
      ]
    },
    {
      q: "最近ほしいのは、どんな“気分”？",
      a: [
        { t:"軽さ・切り替えの速さ", sub:"クリアにいきたい", p:"mercury" },
        { t:"落ち着き・いつもの安心", sub:"整えたい", p:"earth" },
        { t:"刺激・熱量", sub:"燃えたい", p:"mars" },
        { t:"ときめき・甘さ", sub:"やわらかく満たす", p:"venus" }
      ]
    },
    {
      q: "選ぶなら、どの言葉がしっくりくる？",
      a: [
        { t:"「ひらめき」", sub:"瞬発の頭脳", p:"mercury" },
        { t:"「バランス」", sub:"ちょうど良さ", p:"earth" },
        { t:"「挑戦」", sub:"前に進む力", p:"mars" },
        { t:"「引力」", sub:"近づける魅力", p:"venus" }
      ]
    },
    {
      q: "飲みたい味はどれ？",
      a: [
        { t:"柑橘のキレでスッキリ", sub:"Crisp", p:"mercury" },
        { t:"香ばしくて落ち着く", sub:"Malt", p:"earth" },
        { t:"苦味や刺激がほしい", sub:"Spicy/Bitter", p:"mars" },
        { t:"甘くてやわらかい", sub:"Creamy", p:"venus" }
      ]
    },
    {
      q: "あなたの強みは？",
      a: [
        { t:"頭の回転と会話のテンポ", sub:"速さ", p:"mercury" },
        { t:"信頼される安定感", sub:"支える", p:"earth" },
        { t:"やると決めたら突き進む", sub:"突破", p:"mars" },
        { t:"人の心をふわっと軽くする", sub:"やさしさ", p:"venus" }
      ]
    },
    {
      q: "“未来”に対しての姿勢は？",
      a: [
        { t:"新しい情報で更新していく", sub:"アップデート", p:"mercury" },
        { t:"今の基盤を整えて育てる", sub:"積み重ね", p:"earth" },
        { t:"勝負して切り開く", sub:"勝負", p:"mars" },
        { t:"心地よさを守りながら進む", sub:"美しさ", p:"venus" }
      ]
    },
    {
      q: "最後に。いま欲しいのは？",
      a: [
        { t:"スピード感ある一杯", sub:"軽快", p:"mercury" },
        { t:"安心できる一杯", sub:"安定", p:"earth" },
        { t:"熱くなる一杯", sub:"情熱", p:"mars" },
        { t:"やさしく包む一杯", sub:"甘さ", p:"venus" }
      ]
    }
  ];

  // add 2 “world/expansion” questions to let Jupiter/Uranus appear (still Q&A only)
  QUESTIONS.splice(4, 0,
    {
      q: "視野が広い人って、どんな感じ？",
      a: [
        { t:"大きく考えて、伸びしろを見る", sub:"拡大・発展", p:"jupiter" },
        { t:"自分の型を壊して更新する", sub:"革新・自由", p:"uranus" },
        { t:"堅実に整えて、継続する", sub:"安定", p:"earth" },
        { t:"熱で周りを動かす", sub:"情熱", p:"mars" }
      ]
    },
    {
      q: "「普通」より、どっちを選びがち？",
      a: [
        { t:"新しいルールを作る", sub:"革命・自由", p:"uranus" },
        { t:"可能性を広げる", sub:"幸運・拡大", p:"jupiter" },
        { t:"早く回して最適化する", sub:"スピード", p:"mercury" },
        { t:"やさしく整える", sub:"調和", p:"venus" }
      ]
    }
  );

  // ====== State ======
  let idx = 0;
  const score = { mercury:0, venus:0, earth:0, mars:0, jupiter:0, uranus:0 };

  // ====== Elements ======
  const screens = {
    start: document.getElementById("screen-start"),
    quiz: document.getElementById("screen-quiz"),
    result: document.getElementById("screen-result"),
  };
  const aboutText = document.getElementById("about-text");
  const btnAbout = document.getElementById("btn-about");
  const btnStart = document.getElementById("btn-start");
  const btnBack = document.getElementById("btn-back");
  const btnRestartMini = document.getElementById("btn-restart-mini");
  const btnRestart = document.getElementById("btn-restart");

  const qno = document.getElementById("qno");
  const qtext = document.getElementById("qtext");
  const choices = document.getElementById("choices");
  const bar = document.getElementById("bar");

  const resultBadge = document.getElementById("result-badge");
  const resultName = document.getElementById("result-name");
  const resultTagline = document.getElementById("result-tagline");
  const resultKv = document.getElementById("result-kv");
  const resultPersona = document.getElementById("result-persona");
  const resultFlavor = document.getElementById("result-flavor");
  const resultLine = document.getElementById("result-line");
  const btnContinue = document.getElementById("btn-continue");
  const details = document.getElementById("details");

  function show(name){
    Object.values(screens).forEach(s => s.classList.remove("active"));
    screens[name].classList.add("active");
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  function reset(){
    idx = 0;
    Object.keys(score).forEach(k => score[k]=0);
    details.classList.remove("active");
    btnContinue.style.display = "";
    setAccent("#355a7a");
    renderQ();
    show("start");
  }

  function setAccent(hex){
    document.documentElement.style.setProperty("--accent", hex);
    // soft accent
    document.documentElement.style.setProperty("--accent-soft", hexToRgba(hex, .12));
  }

  function hexToRgba(hex, a){
    const h = (hex||"").replace("#","");
    const r = parseInt(h.slice(0,2),16) || 0;
    const g = parseInt(h.slice(2,4),16) || 0;
    const b = parseInt(h.slice(4,6),16) || 0;
    return "rgba("+r+","+g+","+b+","+a+")";
  }

  function renderQ(){
    const total = QUESTIONS.length;
    const q = QUESTIONS[idx];
    qno.textContent = "Q" + (idx+1) + " / " + total;
    qtext.textContent = q.q;
    bar.style.width = Math.round(((idx)/total)*100) + "%";

    choices.innerHTML = "";
    q.a.forEach((opt) => {
      const b = document.createElement("button");
      b.className = "choice";
      b.type = "button";
      b.innerHTML = opt.t + (opt.sub ? "<small>" + opt.sub + "</small>" : "");
      b.addEventListener("click", () => {
        score[opt.p] += 1;
        idx += 1;
        if (idx >= total){
          finish();
        } else {
          renderQ();
        }
      });
      choices.appendChild(b);
    });

    btnBack.disabled = (idx===0);
  }

  function finish(){
    // choose max
    let best = "mercury";
    let max = -1;
    Object.keys(score).forEach(k => {
      if (score[k] > max){ max = score[k]; best = k; }
    });

    const p = PLANETS[best];
    setAccent(p.accent);

    resultBadge.textContent = "RESULT｜" + p.kanji + " / " + p.en;
    resultName.innerHTML = p.kanji + ' <span class="en">' + p.en + "</span>";
    resultTagline.textContent = p.tagline;

    resultKv.innerHTML = "";
    p.keywords.forEach(k => {
      const s = document.createElement("span");
      s.className = "chip";
      s.textContent = k;
      resultKv.appendChild(s);
    });

    resultPersona.textContent = p.persona;
    resultFlavor.textContent = p.flavor;
    resultLine.textContent = p.line;

    bar.style.width = "100%";
    show("result");
  }

  // ====== Events ======
  btnAbout.addEventListener("click", () => {
    aboutText.style.display = (aboutText.style.display === "none" ? "block" : "none");
  });

  btnStart.addEventListener("click", () => {
    renderQ();
    show("quiz");
  });

  btnBack.addEventListener("click", () => {
    if (idx <= 0) return;
    // rollback one step is tricky because we don't store history.
    // simplest: go back without changing score (lightweight).
    // If you want strict backtracking, we can add history later.
    idx -= 1;
    renderQ();
  });

  btnRestartMini.addEventListener("click", () => {
    reset();
    show("quiz");
  });

  btnRestart.addEventListener("click", () => {
    reset();
  });

  // “結果をコピー” -> “続き” behavior: reveal details
  btnContinue.addEventListener("click", () => {
    details.classList.add("active");
    btnContinue.style.display = "none";
    // smooth scroll a bit to details
    setTimeout(() => {
      const y = details.getBoundingClientRect().top + window.scrollY - 12;
      window.scrollTo({ top: y, behavior: "smooth" });
    }, 50);
  });

  // init
  reset();
})();
</script>
</body>
</html>
